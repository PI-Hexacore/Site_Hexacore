<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro | HexaCore</title>
    <link rel="stylesheet" href="./css/cadastro.css">

</head>

<body>

  <video autoplay muted loop class="lg-video">
    <source src="./assets/videos/video-login-hexacore.mp4" type="video/mp4">
  </video>

    <section class="container">

    <button class="btn-voltar" onclick="window.location.href='index.html'">←</button>
    <h1 class="titulo">Cadastro</h1>

    <div class="form-box">

      <div class="form">
        <label for="empresa">Empresa:</label>
        <input type="text" id="empresa" class="input" placeholder="nome da empresa">

        <label for="email">E-mail empresarial:</label>
        <input type="email" id="email" class="input" placeholder="empresa@empresa">

        <label for="cnpj">CNPJ:</label>
        <input type="number" id="cnpj" class="input" placeholder="xx.xxx.xxx/xxxx-xx">

        <label for="senha">Criar senha:</label>
        <input type="password" id="senha" class="input" placeholder="********">

        <button class="btn" onclick="cadastrar()">Cadastrar</button>

      </div>

      <div class="info-box">

        <p>⚠️ Você irá receber um AUTH (autenticador) em seu e-mail cadastrado para realizar o login.</p>
        <br>
        <b><p>Sua senha deve ter:</p></b>
        <ul>
          <li>8 caracteres</li>
          <li>1 número</li>
          <li>1 caractere especial</li>
        </ul>

      </div>

    </div>

  </section>
</body>

</html>
<script>
   function cadastrar() {
    var nomeEmp = empresa.value;
    var emailEmp = email.value;
    var cnpjEmp= cnpj.value;
    var senhaEmp = senha.value; 

    if (
      nomeEmp == "" ||
      emailEmp == "" ||
      senhaEmp == "" ||
      cnpjEmp == ""
    ) {
      return false;
    } else {
      setInterval(5000);
    }

    fetch("/empresas/cadastrar", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        nomeServer: nomeEmp,
        emailServer: emailEmp,
        cnpjServer: cnpjEmp,
        senhaServer: senhaEmp,
      }),
    })
      .then(function (resposta) {
        console.log("resposta: ", resposta);

        if (resposta.ok) {

          setTimeout(() => {
            window.location = "login.html";
          }, "2000");

        } else {
          throw "Houve um erro ao tentar realizar o cadastro!";
        }
      })
      .catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
      });

    return false;
  }

</script>